from matplotlib import pyplot as plt
from matplotlib.pyplot import gca

import numpy as np

other_months = ["June '12", "July '12", "August '12", "September '12", "October '12", "November '12", "December '12", "January '13", "February '13", "March '13"]

modifications = 200

# Port 161
cisco = [0.10844736707518707, 0.09143639534087306, 0.03973883735287419, 0.03961157550199592, 0.0024048713613462297, 0.031961789579334904, 0.008492684725845339, 0.010606270784258647, 0.007871800067312983, 0.010412900352145475]
cisco_counts = [230961, 1798, 233589, 133108, 216031, 216607, 224118, 215669, 219342, 204296, 210290]

# SMTP
sendmail = [0.013319228079963307, 0.02344155653596725, 0.027731886769867445, 0.02166418230175329, 0.03219747688833537, 0.019062479414204504, 0.017730099837379915, 0.017104089131238565, 0.010665433456201178, 0.017074958303789068]
sendmail_counts = [185164, 31443, 27902, 145481, 31187, 41258, 40298, 47038, 47954, 39294, 44214]

exim = [0.044765843784413076, 0.07466410474414399, 0.028333143249124833, 0.017535101993725582, 0.5801391463368014, 0.09950321829633538, 0.06685947673096608, 0.035123776326423356, 0.022957184186880624, 0.008088275723301874]
exim_counts = [732137, 123268, 114847, 567300, 142081, 231851, 223143, 260008, 254864, 207837, 209164]


def plot(data, data_counts):
    np_data = np.array(data)

    error = [modifications / n + modifications / c for n, c in zip(data_counts[1:], data_counts)]

    plt.plot(other_months, np_data)
    plt.fill_between(other_months, np_data - error, np_data + error, color='lightsteelblue')


plot(sendmail, sendmail_counts)
plt.ylim((0, 1))
gca().set_yticklabels(['{:.0f}%'.format(x*100) for x in gca().get_yticks()])
plt.show()
